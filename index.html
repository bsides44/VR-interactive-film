<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>Maddy's Easter Game</title>
  <meta name="description" content="Interactive 360 video-based Easter egg game in web vr using aframe for webxr">
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <link rel="icon" href="./assets/favicon-16.png" sizes="16x16">
  <link rel="icon" href="./assets/favicon-32.png" sizes="32x32">
  <link rel="icon" href="./assets/favicon-64.png" sizes="64x64">
  <link rel="icon" href="./assets/favicon-128.png" sizes="128x128">
  <link rel="icon" href="./assets/favicon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="./assets/favicon-180.png">
  <script src="./js/init-scene-one.js"></script>
  <script src="./js/on-click-accept.js"></script>
  <script src="./js/button-hover.js"></script>
  <script src="./js/play-video.js"></script>
  <script src="./js/on-click-end.js"></script>
  <script src="./js/select-egg.js"></script>
  <script src="./js/egg-appear.js"></script>
  <script src="./js/move-into-vr.js"></script>

</head>
<style>
  .a-loader-title {
    color: white;
    background-color: white;
  }
</style>

<body>
  <a-scene loading-screen="dotsColor: black; backgroundColor: white"  shadow="enabled; autoUpdate: true" renderer="antialias: true"
  webxr="referenceSpaceType: local"  
  move-into-vr
  init-scene-one
  >
    <a-assets >
        <video id="intro" preload="true" src="./assets/intro.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="eeOutdoor" preload="false" src="./assets/ee1.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing1" preload="false" src="./assets/sing1.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="eeIndoorOne" preload="false" src="./assets/ee2_1.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing2" preload="false" src="./assets/sing2.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="articulate" preload="false" src="./assets/articulate.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing3" preload="false" src="./assets/sing3.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="eeIndoorTwo" preload="false" src="./assets/ee2_2.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing4" preload="false" src="./assets/sing4.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="cheers" preload="false" src="./assets/cheers.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        
        <img id="eggStill" src="./assets/favicon-192.png">
        <img id="redEggStill" src="./assets/redEggIcon.png">

        <a-asset-item id="oneEgg" src="./assets/egg/mono/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="twoEgg" src="./assets/egg/spiral/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="threeEgg" src="./assets/egg/spot/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="fourEgg" src="./assets/egg/stripe/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<!-- <a-asset-item id="fiveEgg" src="./assets/egg/tone/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="sixEgg" src="./assets/egg/zigzag/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="sevenEgg" src="./assets/egg/danny/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="eightEgg" src="./assets/egg/glow/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="nineEgg" src="./assets/egg/russia/scene.gltf" response-type="arraybuffer"></a-asset-item> -->

        <audio id="bing" src="./assets/magic-idea.mp3" preload="auto"></audio>
        <audio id="ping" src="./assets/magic-acquire.mp3" preload="auto"></audio>
        <audio id="purr" src="./assets/purr-appear.mp3" preload="auto"></audio>

    </a-assets>

    <!-- VIDEOS -->
    <a-videosphere id="videoPlayer" rotation="0 -70 0" src="#intro" visible="true">
    </a-videosphere>
	<a-loader-progress-bar></a-loader-progress-bar>
    <!-- PREVIOUS BUTTON -->
    <a-box id="prevButton" color="blue" scale="0.3 0.3 0" width="1.4"
    position="-0.3 1.6 -1" visible="false" class="cursor-listener" sound="src: #purr; volume: 0.4"
      button-hover="button: #prevButton; text: #prevText"
      play-video="currentEvent: 1"
      >
    <a-text id="prevText" value="Back?" color="white" align="center" position="0 0 1" visible="true" ></a-text>
    </a-box>
    <!-- NEXT BUTTON -->
    <a-box id="nextButton" color="red" scale="0.3 0.3 0"  width="1.4"
    position="0.3 1.6 -1" visible="false" class="cursor-listener" sound="src: #purr; volume: 0.4"
      button-hover="button: #nextButton; text: #nextText"
      play-video="currentEvent: 2"
    >
    <a-text id="nextText" value="Go Sing?" color="white" align="center" position="0 0 1" visible="true"></a-text>
    </a-box>

    <!-- CONTROLS -->
    <a-entity cursor="rayOrigin: mouse" raycaster="objects: .cursor-listener"></a-entity>

    <!-- OPENING TEXT -->
    <a-text id="welcomeText"
		value="Sound on\nWait for load\n\nPhone/ Computer:\nDrag to explore\nClick or press\nto start\n\nFor VR\nClick VR\nThen press any button"
		position= "0 1.6 -1"
		align= "center"
		color= "grey"
		font= "dejavu"
		width= "2.4"
		lineHeight="0.1"
		geometry="primitive: circle; radius: 1; segments: 64; thetaStart: 90; thetaLength:0"
		animation="property: geometry.thetaLength; to: 60; dur: 500; easing: linear; loop: false"
		animation__loaded="property: geometry.thetaLength; to: 360; dur: 500; easing: linear; loop: false; startEvents: firstVideoLoaded"
		material="side: double; color: white"
    ></a-text>

	<!-- EGG COUNTER -->
	<a-camera>
		<a-image id="eggIconOne" src="#eggStill"
		position="-0.135 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="eggIconTwo" src="#eggStill"
		position="-0.275 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="eggIconThree" src="#eggStill"
		position="-0.415 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="eggIconFour" src="#eggStill"
		position="-0.555 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="bonusIconOne" src="#redEggStill"
		position="-0.555 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="bonusIconTwo" src="#redEggStill"
		position="-0.695 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<a-image id="bonusIconThree" src="#redEggStill"
		position="-0.835 1.098 -1.5"
		visible= "false"
		scale="0.15 0.15 0.15"
		opacity="0.2"
		></a-image>
		<!-- EGG TEXT -->
		<a-entity id="eggCount" text="value:0;
		align: center;
		width:3;
		color: pink;
		font: dejavu;"
		position="0 1.1 -1.5"
		visible= "false"
		sound="src: #bing; volume: 0.6; poolSize: 10"
		></a-entity>
	</a-camera>

	<!-- CHALLENGE TEXT -->
	<a-entity id="challengeText" text="
		value: YOUR MISSION:\nFIND THE\nHIDDEN\nEASTER EGGS\n\n\n& make Alice's\nchildhood dreams\ncome true;
		align: center;
		color: teal;
		font: monoid;"
		position= "0 1.6 -1"
		geometry="primitive: plane; width: 1; height: 0.6"
		material="color: black"
		visible= "false"
		class= "cursor-listener"
		on-click-accept
	></a-entity>
	<a-entity id="acceptButton" text="
		value: ACCEPT; font: monoid; color: red; align: center;" position= "0 1.2 -1" 
		geometry="primitive: plane; width: 1; height: 0.2"
		material="color: black"
		class= "cursor-listener" 
		visible= "false"
		on-click-accept
	></a-entity>

	<!-- VICTORY TEXT -->
	<a-entity id="victoryText" text="
		value: CONGRATULATIONS\nYOU FOUND\nALL THE EGGS\nAND THE SECRET\nHIDDEN BONUS EGGS;
		align: center;
		color: teal;
		font: monoid;"
		position= "0 1.8 -1"
		geometry="primitive: plane; width: 1; height: 0.6"
		material="color: black"
		visible= "false"
		class= "cursor-listener"
		on-click-end
	></a-entity>
	<a-entity id="friendsButton" text="
		value: BUT THE REAL FIND\nWAS THE FRIENDS YOU MADE\nALONG THE WAY; 
		font: monoid; color: red; align: center;" position= "0 1.4 -1" 
		geometry="primitive: plane; width: 1; height: 0.3"
		material="color: black"
		class= "cursor-listener" visible= "false"
		on-click-end
	></a-entity>

	<!-- EGG MODELS -->
	<a-entity
		id="eggOne"
		gltf-model="#oneEgg"	
		position="1 1 -1" 
		scale="0.05 0.05 0.05"
		animation="property: rotation; to: 0 0 20; dur: 200; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.05 0.05 0.05; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
		egg-appear
	></a-entity>
	<a-entity
        id="eggTwo"
        gltf-model="#twoEgg"	
        position="-4 0 -1" 
        scale="0.1 0.1 0.1"
        animation="property: rotation; to: 0 0 20; dur: 400; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.2 0.2 0.2; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggThree"
        gltf-model="#threeEgg"	
        position="2 1 -1" 
        scale="0.05 0.05 0.05"
        animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.05 0.05 0.05; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
		id="eggFour"
		gltf-model="#fourEgg"	
		position="1 1 3" 
		scale="0.1 0.1 0.1"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.15 0.15 0.15; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<!-- <a-entity
		id="eggFive"
		gltf-model="#fiveEgg"	
		position="-4 3 1" 
		scale="0.1 0.1 0.1"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.15 0.15 0.15; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<a-entity
		id="eggSix"
		gltf-model="#sixEgg"	
		position="5.5 1 1.5" 
		scale="0.075 0.075 0.075"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.3 0.3 0.3; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<a-entity
        id="eggSeven"
        gltf-model="#sevenEgg"	
		position="-0.8 1.8 -1" 
		rotation="0 -55 0"
		scale="4 4 4"
        animation="property: position; to: -0.8 1.81 -1; dur: 300; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 8 8 8; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 4 4 4; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggEight"
        gltf-model="#eightEgg"	
        position="-3 2 4" 
        scale="0.002 0.002 0.002"
        animation="property: position; to: -3 2.05 4; dur: 750; easing: easeInOutElastic; loop: true; elasticity: 1000"
		animation__hover="property: scale; to: 0.005 0.005 0.005; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.002 0.002 0.002; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggNine"
        gltf-model="#nineEgg"	
        position="2 1 1" 
		rotation="0 240 0"
        scale="0.4 0.4 0.4"
        animation="property: rotation; to: 0 0 0; dur: 3000; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.6 0.6 0.6; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.4 0.4 0.4; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity> -->
  </a-scene>
</body>
</html>