<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>Maddy's Easter Game</title>
  <meta name="description" content="Interactive 360 video-based Easter egg game in web vr using aframe for webxr">
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <link rel="icon" href="./assets/favicon-16.png" sizes="16x16">
  <link rel="icon" href="./assets/favicon-32.png" sizes="32x32">
  <link rel="icon" href="./assets/favicon-64.png" sizes="64x64">
  <link rel="icon" href="./assets/favicon-128.png" sizes="128x128">
  <link rel="icon" href="./assets/favicon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="./assets/favicon-180.png">
  <script src="./js/init-scene-one.js"></script>
  <script src="./js/on-click-start.js"></script>
  <script src="./js/button-hover.js"></script>
  <script src="./js/play-video.js"></script>
  <script src="./js/on-click-end.js"></script>
  <script src="./js/select-egg.js"></script>
  <script src="./js/egg-appear.js"></script>
  <script src="./js/move-into-vr.js"></script>

</head>
<style>
  .a-loader-title {
    color: white;
    background-color: white;
  }
</style>

<body>
  <a-scene id="scene" loading-screen="dotsColor: black; backgroundColor: white"  shadow="enabled; autoUpdate: true" renderer="antialias: true"
  webxr="referenceSpaceType: local"  
  move-into-vr
  init-scene-one
  >
    <a-assets>
        <video id="intro" preload="true" src="./assets/intro.mp4" autoplay="false" 
                          muted loop="false" crossorigin="anonymous"></video>
        <video id="eeOutdoor" preload="auto" src="./assets/ee1-blended.mp4" autoplay="false" 
                          muted loop="true" crossOrigin="anonymous"></video>
         <video id="sing1" preload="auto" src="./assets/sing1-shorter.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
       <video id="eeIndoorOne" preload="auto" src="./assets/ee2_1.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing2" preload="auto" src="./assets/sing2.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="articulate" preload="auto" src="./assets/articulate.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing3" preload="auto" src="./assets/sing3.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="eeIndoorTwo" preload="auto" src="./assets/ee2-2-shorter.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        <video id="sing4" preload="auto" src="./assets/sing4-shorter.mp4" autoplay="false" 
                          muted loop="false" crossOrigin="anonymous"></video>
        <video id="cheers" preload="auto" src="./assets/cheers.mp4" 
                          autoplay="false" muted loop="false" crossOrigin="anonymous"></video>
        
        <img id="eggStill" src="./assets/favicon-192.png">
        <img id="redEggStill" src="./assets/redEggIcon.png">
		<img id="challengeText4" src="./assets/button/challengeText5.png">
		<img id="startBtn" src="./assets/button/startBtn.png">
        <img id="nextArrow" src="./assets/button/nextArrow.png">
        <img id="backArrow" src="./assets/button/backArrow.png">
        <img id="startText" src="./assets/button/startText.png">
        <img id="victoryText2" src="./assets/button/friends.png">
        <img id="victoryText1" src="./assets/button/victoryTextOne.png">
        <img id="vrStartText" src="./assets/button/vrStartText.png">
        <img id="welcomeImg" src="./assets/button/welcomeText.png">
        <img id="finishBtn" src="./assets/button/finishBtn.png">
		
        <a-asset-item id="oneEgg" src="./assets/egg/mono/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="twoEgg" src="./assets/egg/spiral/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="threeEgg" src="./assets/egg/spot/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="fourEgg" src="./assets/egg/stripe/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="fiveEgg" src="./assets/egg/tone/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="sixEgg" src="./assets/egg/zigzag/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="sevenEgg" src="./assets/egg/danny/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="eightEgg" src="./assets/egg/glow/scene.gltf" response-type="arraybuffer"></a-asset-item>
		<a-asset-item id="nineEgg" src="./assets/egg/russia/scene.gltf" response-type="arraybuffer"></a-asset-item>

        <audio id="bing" src="./assets/magic-idea.mp3" preload="auto"></audio>
        <audio id="ping" src="./assets/magic-acquire.mp3" preload="auto"></audio>
        <audio id="purr" src="./assets/purr-appear.mp3" preload="auto"></audio>

    </a-assets>

	<!-- loading too slow in vr -->
	<!-- need to re edit videos and upload them to cloudflare -->
    <!-- VIDEOS -->
    <a-videosphere id="videoPlayer" rotation="0 -70 0" src="#intro" visible="true">
    </a-videosphere>

    <!-- CONTROLS -->
    <a-entity cursor="rayOrigin: mouse" raycaster="objects: .cursor-listener"></a-entity>

    <!-- OPENING TEXT -->
	<a-image id="welcomeText"
	src="#startText"
	position="0 1.53 -1"
	visible= "true"
	scale="1.3 1.4 1.3"
	sound="src: #purr; volume: 0.4"
	></a-image>
	<a-entity id="welcomeCircle"
	position="0 1.6 -1.1"	
	geometry="primitive: circle; radius: 0.8; segments: 64; thetaStart: 90; thetaLength:0"
	material="color: white"
	animation="property: geometry.thetaLength; to: 60; dur: 500; easing: linear; loop: false"
	animation__loaded="property: geometry.thetaLength; to: 360; dur: 500; easing: linear; loop: false; startEvents: firstVideoLoaded"
	>
	</a-entity>
	<a-image id="loadedText" src="#welcomeImg"
	position="0 1.53 -1"
	visible= "false"
	scale="1.3 1.4 1.3"
	sound="src: #purr; volume: 0.4"
	></a-image>
	<a-image id="vrText" src="#vrStartText"
	position="0 1.6 -1"
	visible= "false"
	scale="1.3 1.3 1.3"
	sound="src: #purr; volume: 0.4"
	></a-image>

	<!-- EGG MODELS -->
	<a-entity
		id="eggOne"
		gltf-model="#oneEgg"	
		position="1 1 -1" 
		scale="0.05 0.05 0.05"
		animation="property: rotation; to: 0 0 20; dur: 200; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.05 0.05 0.05; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
		egg-appear
	></a-entity>
	<a-entity
        id="eggTwo"
        gltf-model="#twoEgg"	
        position="-4 0 -1" 
        scale="0.1 0.1 0.1"
        animation="property: rotation; to: 0 0 20; dur: 400; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.2 0.2 0.2; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggThree"
        gltf-model="#threeEgg"	
        position="2 1 -1" 
        scale="0.05 0.05 0.05"
        animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.05 0.05 0.05; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
		id="eggFour"
		gltf-model="#fourEgg"	
		position="1 1 3" 
		scale="0.1 0.1 0.1"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.15 0.15 0.15; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<a-entity
		id="eggFive"
		gltf-model="#fiveEgg"	
		position="-4 3 1" 
		scale="0.1 0.1 0.1"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.15 0.15 0.15; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.1 0.1 0.1; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<a-entity
		id="eggSix"
		gltf-model="#sixEgg"	
		position="5.5 1 1.5" 
		scale="0.075 0.075 0.075"
		animation="property: rotation; to: 0 0 20; dur: 600; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.3 0.3 0.3; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.075 0.075 0.075; startEvents: raycaster-intersected-cleared; dur: 1"
		sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
	></a-entity>
	<a-entity
        id="eggSeven"
        gltf-model="#sevenEgg"	
		position="-0.8 1.8 -1" 
		rotation="0 -55 0"
		scale="4 4 4"
        animation="property: position; to: -0.8 1.81 -1; dur: 300; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 8 8 8; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 4 4 4; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggEight"
        gltf-model="#eightEgg"	
        position="-3 2 4" 
        scale="0.002 0.002 0.002"
        animation="property: position; to: -3 2.05 4; dur: 750; easing: easeInOutElastic; loop: true; elasticity: 1000"
		animation__hover="property: scale; to: 0.005 0.005 0.005; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.002 0.002 0.002; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	<a-entity
        id="eggNine"
        gltf-model="#nineEgg"	
        position="2 1 1" 
		rotation="0 240 0"
        scale="0.4 0.4 0.4"
        animation="property: rotation; to: 0 0 0; dur: 3000; easing: easeInOutElastic; loop: true"
		animation__hover="property: scale; to: 0.6 0.6 0.6; startEvents: raycaster-intersected; dur: 1"
		animation__endhover="property: scale; to: 0.4 0.4 0.4; startEvents: raycaster-intersected-cleared; dur: 1"
        sound="src: #ping; volume: 0.6; poolSize: 10"
		visible="false"
		class= "cursor-listener"
		select-egg
    ></a-entity>
	
	<!-- VR UI: Assets in scene as Camera interferes with raycaster -->
	<!-- CHALLENGE TEXT -->
	<a-image id="challengeText" src="#challengeText4"
		position="0 1.6 -1"
		visible= "false"
		scale="1 1.3 1"
		class= "cursor-listener"
		on-click-start
	></a-image> 
	<a-image id="startButton" 
		src="#startBtn"
		position="0 1.375 -0.9"
		visible= "false"
		scale="0.4 0.15 0.4"
		class= "cursor-listener"
		button-hover="button: #startButton; scale: 0.4 0.15 0.4"
		on-click-start
	></a-image>

	<!-- PREVIOUS BUTTON -->
	<a-image id="prevButton" src="#backArrow"
		position="-1 1.6 -0.9"
		visible= "false"
		scale="0.6 0.25 1"
		class="cursor-listener" 
		sound="src: #purr; volume: 0.4"
		button-hover="button: #prevButton; scale: 0.6 0.25 1"
		play-video="currentEvent: 1"
	></a-image>
		
	<!-- NEXT BUTTON -->
	<a-image id="nextButton" src="#nextArrow"
		position="1 1.6 -0.9"
		visible= "false"
		scale="0.6 0.25 1"
		class="cursor-listener" 
		sound="src: #purr; volume: 0.4"
		button-hover="button: #nextButton; scale: 0.6 0.25 1"
		play-video="currentEvent: 2"
	></a-image>

	<!-- EGG COUNTER -->
	<a-image id="eggIconOne" src="#eggStill"
		position="-0.1 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="eggIconTwo" src="#eggStill"
		position="-0.2 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="eggIconThree" src="#eggStill"
		position="-0.3 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="eggIconFour" src="#eggStill"
		position="-0.4 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="bonusIconOne" src="#redEggStill"
		position="-0.4 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="bonusIconTwo" src="#redEggStill"
		position="-0.5 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<a-image id="bonusIconThree" src="#redEggStill"
		position="-0.6 2.335 -1"
		visible= "false"
		scale="0.1 0.1 0.1"
		opacity="0.2"
	></a-image>
	<!-- EGG TEXT -->
	<a-entity id="eggCount" text="value:0;
		align: center;
		width:3;
		color: pink;
		font: dejavu;"
		position="0 2.35 -1"
		visible= "false"
		sound="src: #bing; volume: 0.6; poolSize: 10"
	></a-entity>

	<!-- VICTORY TEXT -->  
	<a-image id="victoryText" 
		src="#victoryText1"
		position="0 1.4 -1"
		visible= "false"
		scale="1.2 1.6 1"
	></a-image>
	<a-image id="friendsButton" 
		src="#victoryText2"
		position="-0.03 1.38 -0.9"
		visible= "false"
		scale="0.75 0.275 1"
		class= "cursor-listener"
		button-hover="button: #friendsButton; scale: 0.75 0.275 1"
	></a-image>

  </a-scene>
   	<!-- DESKTOP UI: Responsive; Don't work in VR -->
	<!-- CHALLENGE TEXT -->
	<!-- <img id="challengeText" src="./assets/button/challengeText5.png"
	style="position: fixed;
    top: 50px;
    left: calc(50% - 200px);
    width: 400px;
	visibility: hidden;
	z-index: 9999999;"
	class= "cursor-listener"
	onclick="onClickStart()"
	/>
 	<img id="startButton" 
	src="./assets/button/startBtn.png"
	style="position: fixed;
    top: 390px;
    left: calc(50% - 105px);
    width: 200px;
	visibility: hidden;
	z-index: 9999999;"
	class= "cursor-listener"
	onclick="onClickStart()"
	/> -->
	<!-- PREVIOUS BUTTON -->
	<!-- <div id="#navButtons" 	
	style="position: absolute;
    bottom: 10px;
    left: calc(50% - 220px);
	z-index: 999999;"
	>
		<img id="prevButton" src="./assets/button/backArrow.png"
		style="width: 200px;
		visibility: hidden;
		z-index: 999999;
		padding-right: 20px;"
		class="cursor-listener" 
		sound="src: #purr; volume: 0.4"
		onclick="playVideo(1)"
		/> -->
		
		<!-- NEXT BUTTON -->
		<!-- <img id="nextButton" src="./assets/button/nextArrow.png"
		style="width: 200px;
		visibility: hidden;
		z-index: 999999;
		padding-left: 20px;"
		class="cursor-listener" 
		sound="src: #purr; volume: 0.4"
		onclick="playVideo(8)"
		/>
	</div> -->
	<!-- VICTORY TEXT -->  
	<!-- <img id="victoryText" 
	src="./assets/button/victoryTextOne.png"
	style="position: absolute;
    top: 50px;
    left: calc(50% - 200px);
    width: 400px;
	visibility: hidden;
	z-index: 999999;"
	/>
	<img id="friendsButton" 
	src="./assets/button/friends.png"
	style="position: absolute;
    top: 290px;
    left: calc(50% - 150px);
    width: 292px;
	visibility: hidden;
	z-index: 999999;"
	class= "cursor-listener"
	onclick="onClickEnd()"
	/> -->
	<!-- EGG COUNTER -->
	<!-- <div id="eggCounter" style="visibility: hidden; z-index: 999999;">
		<img id="eggIconOne" src="./assets/favicon-192.png"
		style="position: absolute;
		top: 10px;
		right: 41px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="eggIconTwo" src="./assets/favicon-192.png"
		style="position: absolute;
		top: 10px;
		right: 75px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="eggIconThree" src="./assets/favicon-192.png"
		style="position: absolute;
		top: 10px;
		right: 109px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="eggIconFour" src="./assets/favicon-192.png"
		style="position: absolute;
		top: 10px;
		right: 144px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="bonusIconOne" src="./assets/redEggIcon.png"
		style="position: absolute;
		top: 10px;
		right: 144px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="bonusIconTwo" src="./assets/redEggIcon.png"
		style="position: absolute;
		top: 10px;
		right: 179px;
		width: 40px;
		opacity: 0.2"
		/>
		<img id="bonusIconThree" src="./assets/redEggIcon.png"
		style="position: absolute;
		top: 10px;
		right: 213px;
		width: 40px;
		opacity: 0.2"
		/> -->
		<!-- EGG TEXT -->
		<!-- <p id="eggCount"
		style="position: absolute;
		top: -23px;
		right: 8px;
		font-size: 4em;
		line-height: 0;
		font-family: monospace;
		color:darkmagenta"
		sound="src: #bing; volume: 0.6; poolSize: 10">0</p>
	</div>
	<style>
		#startButton:hover, #prevButton:hover, #nextButton:hover, #friendsButton:hover {
			scale: 1.25 1.25
		}
	</style> -->
<!-- <script>
var currentVideo = "intro"
var events = [
			{index: 0, id: "#intro", numberOfEggs: 0, buttonTimer: 0, buttonPrev: null, buttonNext: null, rotation:"0 -70 0" },
			{index: 1, id: "#eeOutdoor", numberOfEggs: 3, bonusEggs: 3, bonusTimer: 15000, buttonTimer: 10000, buttonPrev: null, buttonNext: "Time To\nSing" , rotation:"0 -90 0" },
			{index: 2, id: "#sing1", numberOfEggs: 3, buttonTimer: 10000, buttonPrev: "Go Back\nOutside", buttonNext: "Hunt\nInside" , rotation:"0 -90 0" },
			{index: 3, id: "#eeIndoorOne", numberOfEggs: 3, buttonTimer: 8000, buttonPrev: "Go Back To\nSinging", buttonNext: "Sing A\nNew Song" , rotation:"0 -90 0" },
			{index: 4, id: "#sing2", numberOfEggs: 3, buttonTimer: 6000, buttonPrev: "Search Inside\nAgain", buttonNext: "Board Game" , rotation:"0 -90 0" },
			{index: 5, id: "#articulate", numberOfEggs: 3, buttonTimer: 4000, buttonPrev: "Go Back To\nSinging", buttonNext: "Sing Some\nMore", rotation:"0 70 0" },
			{index: 6, id: "#sing3", numberOfEggs: 3, buttonTimer: 3000, buttonPrev: "Back To\nBoard Game", buttonNext: "Look Inside\nAgain" , rotation:"0 70 0" },
			{index: 7, id: "#eeIndoorTwo", numberOfEggs: 3, buttonTimer: 3000, buttonPrev: "Return To\nSinging", buttonNext: "One More\nSong" , rotation:"-10 210 0" },
			{index: 8, id: "#sing4", numberOfEggs: 3, buttonTimer: 4000, buttonPrev: "Look Indoors\nAgain", buttonNext: "End", rotation:"0 115 0" },
			{index: 9, id: "#cheers", numberOfEggs: 0, buttonTimer: 0, buttonPrev: null, buttonNext: null, rotation:"0 160 0" },
		]

 function onClickStart () {
	var challenge = document.getElementById("challengeText")
	var style = getComputedStyle(challenge);
	var isVisible = style.getPropertyValue('visibility')

        if (isVisible == 'visible') {
            // replace video source
            var videoPlayer = document.querySelector("#videoPlayer")
            videoPlayer.setAttribute("src", "#eeOutdoor");

            // play video
            var vidSource = document.querySelector("#eeOutdoor")
            vidSource.muted = false
            vidSource.play()
    
            // emit playing event
			var scene = document.getElementById("scene")
			scene.emit('videoChanged', {id: '#eeOutdoor'})
            // currentVideo = "eeOutdoor";

            // make challenge disappear
			challenge.style.setProperty('visibility', 'hidden')
            document.getElementById("startButton").style.setProperty('visibility', 'hidden')
            
            // make egg counter appear
            document.getElementById("eggCount").style.setProperty('visibility', 'visible')

            setTimeout(() => {
                this.appearButtons({index:1, buttonNext: true, })
            }, 10000);
        }
 }
 function appearButtons(event) {
		var prevButton = document.getElementById("prevButton")
        var nextButton = document.getElementById("nextButton")

        // new button text and play options
        if (event.buttonPrev) {
          prevButton.setAttribute("play-video", {currentEvent: event.index - 1})
          prevButton.style.setProperty('visibility', 'visible')
        }
        
        // new button text and play options
        if (event.buttonNext) {
          if (event.index === 8) {
            nextButton.setAttribute('src', '#finishBtn')
          }
          nextButton.setAttribute("play-video", {currentEvent: event.index + 1})
          nextButton.style.setProperty('visibility', 'visible')
		// nextButton.components.sound.playSound();
          
        }
    }
 function playVideo(index) {
		//NB: #eeOutdoor handled from on-click-accept
		var event = events[index]

		// emit playing event
		var scene = document.getElementById("scene")
			scene.emit('videoChanged', {id: event.id})

        // replace video source
        var videoPlayer = document.getElementById("videoPlayer")
		videoPlayer.getAttribute('material').src.pause()
		// videoPlayer.getAttribute('material').src.muted = true
        if (event.id) videoPlayer.setAttribute("src", event.id);
		videoPlayer.setAttribute('rotation', event.rotation)

        // play video
        // var vidSource = document.getElementById(event.id)
        // vidSource.muted = false

		// last video handler
		if (event.index === 9) {      
			var victoryText = document.getElementById("victoryText")
      var friendsButton = document.getElementById("friendsButton")
      victoryText.style.setProperty('visibility', 'visible')
			setTimeout(() => {
				friendsButton.style.setProperty('visibility', 'visible')
			}, 2000);
		}
		else {
			videoPlayer.getAttribute('material').src.play()
		}
  
        // make buttons disappear
        document.getElementById("nextButton").style.setProperty('visibility', 'hidden')
        document.getElementById("prevButton").style.setProperty('visibility', 'hidden')

        // set next buttons to appear. NB scene 2 buttons handled in on-click-accept
        if (event.buttonTimer >= 1) {
          setTimeout(() => {
            this.appearButtons(event)
        }, event.buttonTimer);
       }
}
 function onClickEnd() {
		var videoPlayer = document.getElementById("videoPlayer")
		videoPlayer.getAttribute('material').src.play()
  
        // make text disappear
        document.getElementById("victoryText").style.setProperty('visibility', 'hidden')
        document.getElementById("friendsButton").style.setProperty('visibility', 'hidden')

        var sceneEl = document.getElementById("-scene")

        // NB: video & text handled in play-video, eggs handled in egg-appear
 }

</script> -->

</body>
</html>