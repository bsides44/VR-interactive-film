<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>Maddy's Brain</title>
  <meta name="description" content="Interactive 360 video in web vr using a frame for webxr">
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="./play-on-click.js"></script>
  <script src="./xbutton-listener.js"></script>
  <script src="./track-enter-vr.js"></script>
  <script src="./disappear-on-complete.js"></script>

</head>
<style>
  .a-loader-title {
    color: white;
    background-color: white;
  }
</style>

<body>
  <a-scene loading-screen="dotsColor: black; backgroundColor: white"  shadow="enabled; autoUpdate: true" xbutton-listener track-enter-vr renderer="antialias: true"
  webxr="referenceSpaceType: local" play-on-click>
    <a-assets>
        <video id="monoPico" preload="auto" src="./Mono_Pico.mp4" autoplay="true" loop="false" crossOrigin="anonymous"></video>
        <video id="houseVideo" preload="auto" src="./VIDEO_5591.mp4" autoplay="false" loop="false" crossOrigin="anonymous"></video>
        <img id="house" src="./path360.jpeg">
        <a-asset-item id="plane" src="./plane.glb" response-type="arraybuffer"></a-asset-item>
    </a-assets>

    <!-- VIDEOS -->
    <a-videosphere id="video" rotation="0 -90 0" src="#monoPico" visible="true">
    </a-videosphere>
    <a-videosphere id="secondVideo" rotation="0 -90 0" src="#houseVideo" visible="false">
    </a-videosphere>

    <!-- BUTTON -->
    <a-triangle id="nextVideoButton" color="blue" rotation="5 0 40" scale="0.3 0.3 0.3" position="1 1.3 -1" visible="false" class="cursor-listener" >
    </a-triangle>
    <a-text id="nextText" value="Play \n Next" width="1.2" height="1.2" color="black" align="center" rotation="0 -25 0" position="1 1 -1" visible="false"></a-text>

    <!-- PORTAL -->
    <a-box id="portalLander" color="blue" height="0.45" width="0.45" rotation="0 25 0" depth="0.1" position="-1 1 -1.01" class="cursor-listener" material="transparent: true; opacity: 0"></a-box>
    <a-link id="portal" href="pageTwo.html" title="Next Video" image="#house" scale="0.2 0.2 0.2" rotation="0 25 0" position="-1 1 -1" class="cursor-listener"></a-link>

    <!-- CONTROLS -->
    <a-entity cursor="rayOrigin: mouse" raycaster="objects: .cursor-listener"></a-entity>

    <!-- ANIMATED MODEL -->
    <a-entity
        id="animModel"
        gltf-model="#plane"	
        position="13 5 -4" 
        rotation="0 -90 0"
        scale="0.1 0.1 0.1"
        animation="property: position; to: -50 2 -10; dur: 30000; easing: linear; loop: false; startEvents: startanim001; pauseEvents: stopanim001"
    ></a-entity>
    <a-entity
      id="secondModel"
      gltf-model="#plane"	
      position="-30 7 -10" 
      rotation="0 90 0"
      scale="0.1 0.1 0.1"
      animation="property: position; to: 60 10 -12; dur: 16500; easing: linear; loop: false; startEvents: startanim002"
      disappear-on-complete
></a-entity>
  </a-scene>
</body>
</html>